
.\"
.TH retrieve_file 1  23-July-2006  "DRMS MANPAGE" "DRMS Programmer's Manual"
.SH NAME
retrieve_file \- DRMS retrieve a stored file.
.SH SYNOPSIS
.nf
.B retrieve_file {-f} {-h} {-l} {-v} ds=<seriesname>{[<record_spec>]} to=<dest> {segment=<segment_name>}


.SH DESCRIPTION
.PP
Retrieve_file can be used to get a copy of or a link to a file stored in a DRMS/SUMS record.
It can be used for records made by any method.
.PP
Retrieve_file and store_file are a pair of programs to enable easy use
(or abuse perhaps) of the DRMS/SUMS system to store and retrieve archived copies of
any file.  These can be used for an individual's data which is too large to
reside in backed-up filesystems.  They may also be used to hold raw versions
of imported data which we need to retain but has not yet or will not be entered
into DRMS in the normal means.
.PP
Retrieve a file from SUMS and copy (or link) it to the destination directory specified by the "to" argument.
File usually archived with store_file program.
The <record_spec> should resolve to one or more records.  Each matched
record with a filename specified in the filekey keyword will
have that file retrieved.  The default is keyword name is "filename".
The file will overwrite any file with the same name in the
current directory. If a pre-exting file with the same name is present
it will be renamed to have a "~" suffix as is done with some edittors to
indicate a backup version.  If the force ("-f") flag is given no backup
will be made and a pre-existing file will be silently removed if necessary.
The list of files retrieved will be on stdout.  If the file can not be found, the
output will be NOT_FOUND.  If a note is defined for the record
it will be printed after the filename. 
If the link ("-l") flag is given a symbolic link to the SUMS copy of the file
will be made rather than copying the file from SUMS.  This can be conveneint for quick use
but the SUMS copy may not remain online beyond the retention time (default 7 days for store_file
generated saved files.)
.pp
If the series contains more than one data segment, the "segment" argument must be given.
.PP
Example:

  store_file in=/tmp20/phil/file12345.fits ds=su_phil.savedfiles  note="my really important stuff"

Then, later:

  retrieve_file phil.savedfiles[file12345.fits] out=./

.PP
Flags:
.br
.B -f
Force removal of a pre-existing file with same name as retreived file.
.B -h
Print usage message and exit
.br
.B -l
Create a symbolic link to the SUMS copy of the file.
.br
.B -v
Verbose - noisy.
.br
.PP
.SH "SEE ALSO"
.BR store_file(1)
.BR show_keys(1)
