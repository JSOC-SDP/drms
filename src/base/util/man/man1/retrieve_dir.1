
.\"
.TH retrieve_dir 1  05-December-2006  "DRMS MANPAGE" "DRMS Programmer's Manual"
.SH NAME
retrieve_dir \- DRMS retrieve a stored directory of files.
.SH SYNOPSIS
.nf
.B retrieve_dir \fR[\fB-l\fR<jsoc_flags>] \fBseries=\fR<record_set> \fBto=\fR<dest> [\fBdirkey=\fR<dirname_keyword>]


.SH DESCRIPTION
.PP
store_dir and retrieve_dir are a pair of utilities to store (and retrieve) an arbitrary 
set of files to (from) DRMS/SUMS.  retrieve_dir can easily retrieve files stored by the store_dir
utility.
.PP
Each record specified by <record_set> refers to a subdirectory within
the record's SUMS directory, <record_directory> (each record "owns" a SUMS directory).  
<dirname_keyword> names a keyword in the series, and the record's value of this keyword 
contains a directory path.  The name of the SUMS subdirectory, <subdir>, containing the files
is the directory name part of the directory path (i.e., 
it is all of the string after the last '/' in this value).  Therefore, the SUMS location
of the record's stored files is <record_directory>/<subdir>.
For each record in the <record_set>, retrieve_dir 
copies or links all files within the referenced subdirectory to the 
directory specified by the "to" argument.  Typically, the files are stored into SUMS
with the store_dir utility.  retrieve_dir will overwrite any files existing in the destination 
directory whose
name matches the name of a file to be copied from a SUMS subdirectory.  If the link flag, "-l",
is specified, then retrieve_dir will create a link to the SUMS directory instead of 
copying from the SUMS directory to the destination directory.  Keep in mind that over time
this link may become broken as SUMS may remove a stored file if it is present in SUMS 
longer than its specified retention time.
.PP
Example to store files:

  store_dir series=su_arta.TestStoreDir dirname=/auto/home2/arta/savedFilesJanuary sel=January 
note="All my January work"

Example to retrieve files:

  retrieve_dir series=su_arta.TestStoreDir to=/auto/home2/arta/restoredFilesJanuary/ dirkey=dirname

.SH FLAGS
.SS module-specific flags
.IP \fB-l\fR 20
Create a symbolic link to the SUMS directory containing the set of files of interest.
.SS jsoc-driver flags
.IP \fB-H\fR|\fB--help\fR 20
Show jsoc_main usage information.
.IP \fB-L\fR 20
Run jsoc_main driver without logging.
.IP \fB-V\fR 20
Run jsoc_main driver in verbose mode.
.IP \fB-Q\fR 20
Run jsoc_main driver in quiet mode (no terminal output).

.SH ARGUMENTS
.IP \fBseries=\fR<record_set> 20 
A series name followed by an optional record set filter 
(i.e., <name>[RecordSet_filter]).  Each record retrieved with this <record_set> query
will refer to one directory.  The contents of all such directories will be copied/linked
to <dest>.
.IP \fBto=\fR<dest> 20 
The destination directory to which the SUMS files should be copied/linked.  
Do not append a final '/' to the path (i.e., /home/arta/dir1 is acceptable, but /home/arta/dir1/
is not)
.IP \fBdirkey=\fR<dirname_keyword> 20
Name of the keyword containing the path of the directory originally
stored with store_dir.
.PP
.SH "SEE ALSO"
.BR store_dir(1)
.BR retrieve_file(1)
.BR store_file(1)

